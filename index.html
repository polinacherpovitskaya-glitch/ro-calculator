<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recycle Object — Калькулятор заказов</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css?v=25">
</head>
<body>

<!-- =============================================
     AUTH SCREEN
     ============================================= -->
<div id="auth-screen" class="auth-screen">
    <div class="auth-box">
        <h1>Recycle Object</h1>
        <p>Калькулятор заказов</p>
        <input type="password" id="auth-password" placeholder="Введите пароль" autocomplete="off">
        <div id="auth-error" class="auth-error">Неверный пароль</div>
        <button class="btn btn-primary btn-lg" style="width:100%" onclick="App.login()">Войти</button>
    </div>
</div>

<!-- =============================================
     APP LAYOUT
     ============================================= -->
<div id="app-layout" class="app-layout">

    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-brand">
            <h2>Recycle Object</h2>
            <span>Калькулятор <span id="app-version">v20</span></span>
        </div>
        <nav class="sidebar-nav">
            <a href="#dashboard" data-page="dashboard">
                <span class="nav-icon">&#9632;</span>
                <span>Дашборд</span>
            </a>
            <a href="#calculator" data-page="calculator">
                <span class="nav-icon">&#9998;</span>
                <span>Калькулятор</span>
            </a>
            <a href="#orders" data-page="orders">
                <span class="nav-icon">&#9776;</span>
                <span>Заказы</span>
            </a>
            <a href="#factual" data-page="factual">
                <span class="nav-icon">&#9646;</span>
                <span>Факт</span>
            </a>
            <a href="#analytics" data-page="analytics">
                <span class="nav-icon">&#9673;</span>
                <span>Аналитика</span>
            </a>
            <a href="#molds" data-page="molds">
                <span class="nav-icon">&#9670;</span>
                <span>Бланки</span>
            </a>
            <a href="#timetrack" data-page="timetrack">
                <span class="nav-icon">&#9201;</span>
                <span>Часы</span>
            </a>
            <a href="#tasks" data-page="tasks">
                <span class="nav-icon">&#9745;</span>
                <span>Задачи</span>
            </a>
            <a href="#import" data-page="import">
                <span class="nav-icon">&#8645;</span>
                <span>Импорт</span>
            </a>
            <a href="#settings" data-page="settings">
                <span class="nav-icon">&#9881;</span>
                <span>Настройки</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">

        <!-- ========== DASHBOARD ========== -->
        <div id="page-dashboard" class="page">
            <div class="page-header">
                <h1>Дашборд</h1>
                <button class="btn btn-primary" onclick="App.navigate('calculator')">+ Новый расчет</button>
            </div>

            <div class="stats-grid" id="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-label">Заказов в работе</div>
                    <div class="stat-value" id="dash-orders-active">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Загрузка литья</div>
                    <div class="stat-value" id="dash-load-plastic">0%</div>
                    <div class="load-bar"><div class="load-bar-fill green" id="dash-load-plastic-bar" style="width:0"></div></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Загрузка упаковки</div>
                    <div class="stat-value" id="dash-load-packaging">0%</div>
                    <div class="load-bar"><div class="load-bar-fill green" id="dash-load-packaging-bar" style="width:0"></div></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Выручка (план)</div>
                    <div class="stat-value" id="dash-revenue">0 &#8381;</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Последние расчеты</h3>
                    <a href="#orders" class="btn btn-sm btn-outline" onclick="App.navigate('orders')">Все заказы</a>
                </div>
                <div class="table-wrap">
                    <table>
                        <thead>
                            <tr>
                                <th>Заказ</th>
                                <th>Клиент</th>
                                <th>Статус</th>
                                <th class="text-right">Выручка</th>
                                <th class="text-right">Маржа</th>
                                <th>Дата</th>
                            </tr>
                        </thead>
                        <tbody id="dashboard-orders-table">
                            <tr><td colspan="6" class="text-center text-muted">Загрузка...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ========== CALCULATOR ========== -->
        <div id="page-calculator" class="page">
            <div class="page-header">
                <h1>Калькулятор заказа</h1>
                <div class="flex gap-8">
                    <button class="btn btn-outline" onclick="Calculator.generateKP()">&#128196; Скачать КП</button>
                    <button class="btn btn-outline" onclick="Calculator.resetForm()">Сбросить</button>
                    <button class="btn btn-success" onclick="Calculator.saveOrder()">Сохранить заказ</button>
                </div>
            </div>

            <!-- Order info -->
            <div class="card">
                <div class="form-row">
                    <div class="form-group">
                        <label>Название заказа</label>
                        <input type="text" id="calc-order-name" placeholder="Например: Брелоки для Яндекс">
                    </div>
                    <div class="form-group">
                        <label>Клиент</label>
                        <input type="text" id="calc-client-name" placeholder="Компания">
                    </div>
                    <div class="form-group">
                        <label>Менеджер</label>
                        <select id="calc-manager-name">
                            <option value="">-- Выбрать --</option>
                            <option value="Алина">Алина</option>
                            <option value="Элина">Элина</option>
                            <option value="Аня">Аня</option>
                            <option value="Глеб">Глеб</option>
                            <option value="Полина">Полина</option>
                            <option value="Никита">Никита</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Дедлайн</label>
                        <input type="date" id="calc-deadline">
                    </div>
                </div>
                <div class="form-group">
                    <label>Заметки</label>
                    <textarea id="calc-notes" rows="2" placeholder="Доп. информация по заказу"></textarea>
                </div>
            </div>

            <!-- Item blocks container -->
            <div id="calc-items-container"></div>

            <div style="text-align:center; margin: 12px 0;">
                <button class="btn btn-outline" id="calc-add-item-btn" onclick="Calculator.addItem()">+ Добавить изделие</button>
            </div>

            <!-- Hardware section (order-level) -->
            <div class="card">
                <div class="card-header">
                    <h3>Фурнитура</h3>
                    <button class="btn btn-sm btn-outline" onclick="Calculator.addHardware()">+ Добавить</button>
                </div>
                <p class="text-muted" style="font-size:12px; margin-bottom:8px">Карабины, кольца, магниты, зеркала и т.д.</p>
                <div id="calc-hardware-list"></div>
            </div>

            <!-- Packaging section (order-level) -->
            <div class="card">
                <div class="card-header">
                    <h3>Упаковка</h3>
                    <button class="btn btn-sm btn-outline" onclick="Calculator.addPackaging()">+ Добавить</button>
                </div>
                <p class="text-muted" style="font-size:12px; margin-bottom:8px">Мешочки, пакеты, коробки и т.д.</p>
                <div id="calc-packaging-list"></div>
            </div>

            <!-- Unified pricing card -->
            <div class="card" id="calc-pricing" style="display:none">
                <div class="card-header">
                    <h3>Ценообразование</h3>
                    <span style="font-size:11px; color:var(--text-muted)">+ 6% ОСН + 6.5% коммерч. уже заложены</span>
                </div>
                <div id="calc-pricing-content"></div>
            </div>

            <!-- Production load -->
            <div class="card" id="calc-production-load" style="display:none">
                <div class="card-header">
                    <h3>Загрузка производства</h3>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Литьё + обработка</div>
                        <div class="stat-value" id="calc-hours-plastic">0 ч</div>
                        <div class="load-bar"><div class="load-bar-fill green" id="calc-load-plastic-bar" style="width:0"></div></div>
                        <div class="stat-sub" id="calc-load-plastic-pct">0% от мощности</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Упаковка + фурнитура</div>
                        <div class="stat-value" id="calc-hours-packaging">0 ч</div>
                        <div class="load-bar"><div class="load-bar-fill green" id="calc-load-packaging-bar" style="width:0"></div></div>
                        <div class="stat-sub" id="calc-load-packaging-pct">0% от мощности</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Всего часов</div>
                        <div class="stat-value" id="calc-hours-total">0 ч</div>
                    </div>
                </div>
                <div class="form-row" style="max-width:500px">
                    <div class="stat-card">
                        <div class="stat-label">1 сотрудник</div>
                        <div class="stat-value" id="calc-days-1w">0 дн</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">2 сотрудника</div>
                        <div class="stat-value" id="calc-days-2w">0 дн</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">3 сотрудника</div>
                        <div class="stat-value" id="calc-days-3w">0 дн</div>
                    </div>
                </div>
            </div>

            <!-- FinDirector summary -->
            <div class="card" id="calc-findirector" style="display:none">
                <div class="card-header">
                    <h3>Смета для финдиректора</h3>
                </div>
                <div class="cost-breakdown">
                    <div class="cost-row"><span class="cost-label">Зарплата производство</span><span class="cost-value" id="fin-salary">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Закупка фурнитуры + NFC</span><span class="cost-value" id="fin-hardware">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Доставка фурнитуры</span><span class="cost-value" id="fin-hw-delivery">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Закупка упаковки</span><span class="cost-value" id="fin-packaging">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Доставка упаковки</span><span class="cost-value" id="fin-pkg-delivery">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Проектирование</span><span class="cost-value" id="fin-design">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Нанесение</span><span class="cost-value" id="fin-printing">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Пластик</span><span class="cost-value" id="fin-plastic">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Молды</span><span class="cost-value" id="fin-molds">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Доставка клиенту</span><span class="cost-value" id="fin-delivery">0 &#8381;</span></div>
                    <div class="cost-row"><span class="cost-label">Налоги (НДС + налог)</span><span class="cost-value" id="fin-taxes">0 &#8381;</span></div>
                    <div class="cost-row cost-total"><span class="cost-label">ИТОГО расходы</span><span class="cost-value" id="fin-total-costs">0 &#8381;</span></div>
                    <div class="cost-row" style="margin-top:8px"><span class="cost-label">Выручка</span><span class="cost-value text-green" id="fin-revenue">0 &#8381;</span></div>
                </div>
            </div>

            <!-- Summary footer -->
            <div class="summary-footer" id="calc-summary-footer" style="display:none">
                <div class="summary-stats">
                    <div class="summary-stat-item">
                        <div class="label">Выручка</div>
                        <div class="value" id="sum-revenue">0 &#8381;</div>
                    </div>
                    <div class="summary-stat-item">
                        <div class="label">Заработок</div>
                        <div class="value" id="sum-earned">0 &#8381;</div>
                    </div>
                    <div class="summary-stat-item">
                        <div class="label">Маржа</div>
                        <div class="value" id="sum-margin">0%</div>
                    </div>
                    <div class="summary-stat-item">
                        <div class="label">Часы</div>
                        <div class="value" id="sum-hours">0 ч</div>
                    </div>
                </div>
                <button class="btn btn-success btn-lg" onclick="Calculator.saveOrder()">Сохранить</button>
            </div>

            <!-- Change history (shown when editing existing order) -->
            <div class="card" id="calc-history" style="display:none; margin-top:16px;">
                <h3 style="margin:0 0 8px 0; font-size:14px;">История изменений</h3>
                <div id="calc-history-list" style="font-size:12px;"></div>
            </div>
        </div>

        <!-- ========== ORDERS ========== -->
        <div id="page-orders" class="page">
            <div class="page-header">
                <h1>История заказов</h1>
                <button class="btn btn-primary" onclick="App.navigate('calculator')">+ Новый расчет</button>
            </div>

            <div class="card" style="padding: 12px 20px;">
                <div class="form-row" style="align-items:end">
                    <div class="form-group" style="margin:0">
                        <label>Статус</label>
                        <select id="orders-filter-status" onchange="Orders.loadList()">
                            <option value="">Все</option>
                            <option value="draft">Черновик</option>
                            <option value="calculated">Рассчитан</option>
                            <option value="in_production">В производстве</option>
                            <option value="completed">Выполнен</option>
                            <option value="cancelled">Отменен</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Поиск</label>
                        <input type="text" id="orders-search" placeholder="Название / клиент" oninput="Orders.filterLocal()">
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="table-wrap">
                    <table>
                        <thead>
                            <tr>
                                <th>Заказ</th>
                                <th>Клиент</th>
                                <th>Менеджер</th>
                                <th>Статус</th>
                                <th class="text-right">Выручка</th>
                                <th class="text-right">Маржа</th>
                                <th>Дата</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="orders-table-body">
                            <tr><td colspan="8" class="text-center text-muted">Загрузка...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ========== FACTUAL (Plan vs Fact) ========== -->
        <div id="page-factual" class="page">
            <div class="page-header">
                <h1>Факт: план vs реальность</h1>
            </div>

            <!-- Order selector (searchable) -->
            <div class="card" style="margin-bottom:16px">
                <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
                    <label style="font-weight:600; white-space:nowrap;">Заказ:</label>
                    <div style="position:relative; max-width:400px; flex:1;">
                        <input type="text" id="fact-order-search" class="form-control" placeholder="Поиск заказа..." autocomplete="off"
                            oninput="Factual.onSearch(this.value)"
                            onfocus="Factual.showDropdown()"
                            style="width:100%;">
                        <div id="fact-order-dropdown" style="display:none; position:absolute; top:100%; left:0; right:0; max-height:300px; overflow-y:auto; background:var(--card-bg); border:1px solid var(--border); border-radius:0 0 8px 8px; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:100;"></div>
                    </div>
                    <span id="fact-order-status" style="font-size:12px; color:var(--text-muted);"></span>
                </div>
            </div>

            <!-- Plan vs Fact table -->
            <div class="card" id="fact-table-card" style="display:none">
                <div class="card-header" style="display:flex; justify-content:space-between; align-items:center;">
                    <h3>Расходы: план vs факт</h3>
                    <button class="btn btn-success" onclick="Factual.saveFact()">Сохранить факт</button>
                </div>
                <div id="fact-table-content"></div>
            </div>

            <!-- Hours comparison -->
            <div class="card" id="fact-hours-card" style="display:none; margin-top:16px;">
                <h3 style="margin:0 0 12px 0; font-size:14px;">Часы: план vs факт</h3>
                <div id="fact-hours-content"></div>
            </div>

            <!-- Notes -->
            <div class="card" id="fact-notes-card" style="display:none; margin-top:16px;">
                <h3 style="margin:0 0 8px 0; font-size:14px;">Комментарий</h3>
                <textarea id="fact-notes" class="form-control" rows="3" placeholder="Заметки по фактическим расходам..." oninput="Factual.onNotesChange(this.value)"></textarea>
            </div>
        </div>

        <!-- ========== ANALYTICS ========== -->
        <div id="page-analytics" class="page">
            <div class="page-header">
                <h1>Аналитика</h1>
            </div>

            <div class="stats-grid" id="analytics-stats">
                <div class="stat-card">
                    <div class="stat-label">Всего заказов</div>
                    <div class="stat-value" id="anl-total-orders">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Средняя маржа</div>
                    <div class="stat-value" id="anl-avg-margin">0%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Общая выручка</div>
                    <div class="stat-value" id="anl-total-revenue">0 &#8381;</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Общий заработок</div>
                    <div class="stat-value" id="anl-total-earned">0 &#8381;</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Заказы по маржинальности</h3>
                </div>
                <div class="table-wrap">
                    <table>
                        <thead>
                            <tr>
                                <th>Заказ</th>
                                <th>Клиент</th>
                                <th class="text-right">Выручка</th>
                                <th class="text-right">Себестоимость</th>
                                <th class="text-right">Маржа</th>
                            </tr>
                        </thead>
                        <tbody id="analytics-table-body">
                            <tr><td colspan="5" class="text-center text-muted">Нет данных</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <div class="card-header"><h3>Структура себестоимости</h3></div>
                <canvas id="analytics-cost-chart" height="300" style="max-width:500px"></canvas>
            </div>
        </div>

        <!-- ========== MOLDS ========== -->
        <div id="page-molds" class="page">
            <div class="page-header">
                <h1>Справочник бланков</h1>
                <div class="flex gap-8">
                    <button class="btn btn-outline" onclick="Molds.exportCSV()">Экспорт CSV</button>
                    <button class="btn btn-primary" onclick="Molds.showAddForm()">+ Новый бланк</button>
                </div>
            </div>

            <!-- Summary stats -->
            <div class="stats-grid" id="molds-stats">
                <div class="stat-card">
                    <div class="stat-label">Всего бланков</div>
                    <div class="stat-value" id="molds-total">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Активных</div>
                    <div class="stat-value" id="molds-active">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Ср. себестоимость (100 шт)</div>
                    <div class="stat-value" id="molds-avg-cost">0 &#8381;</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Общая стоимость бланков</div>
                    <div class="stat-value" id="molds-total-value">0 &#8381;</div>
                </div>
            </div>

            <!-- Filters -->
            <div class="card" style="padding: 12px 20px;">
                <div class="form-row" style="align-items:end">
                    <div class="form-group" style="margin:0">
                        <label>Статус</label>
                        <select id="molds-filter-status" onchange="Molds.filterAndRender()">
                            <option value="">Все</option>
                            <option value="active">Активные</option>
                            <option value="client">Клиентские</option>
                            <option value="retired">Неактивные</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Коллекция</label>
                        <select id="molds-filter-collection" onchange="Molds.filterAndRender()">
                            <option value="">Все</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Сортировка</label>
                        <select id="molds-sort" onchange="Molds.filterAndRender()">
                            <option value="name">По названию</option>
                            <option value="cost_asc">Себестоимость ↑</option>
                            <option value="cost_desc">Себестоимость ↓</option>
                            <option value="margin_desc">Маржа ↓</option>
                            <option value="orders_desc">Кол-во заказов ↓</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Поиск</label>
                        <input type="text" id="molds-search" placeholder="Название" oninput="Molds.filterAndRender()">
                    </div>
                </div>
            </div>

            <!-- Molds cards container -->
            <div id="molds-cards-container"></div>

            <!-- Add/Edit modal (inline) -->
            <div class="card" id="mold-edit-form" style="display:none;">
                <div class="card-header">
                    <h3 id="mold-form-title">Новый бланк</h3>
                    <button class="btn btn-sm btn-outline" onclick="Molds.hideForm()">Закрыть</button>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Название</label>
                        <input type="text" id="mold-name">
                    </div>
                    <div class="form-group">
                        <label>Категория</label>
                        <select id="mold-category">
                            <option value="blank">Бланк (ходовой)</option>
                            <option value="nfc">NFC (3 части)</option>
                            <option value="custom">Кастомный наш</option>
                            <option value="client_custom">Кастомный клиентский</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Коллекция</label>
                        <div style="display:flex;gap:4px;">
                            <select id="mold-collection" style="flex:1;">
                                <option value="">— Без коллекции —</option>
                            </select>
                            <button class="btn btn-sm btn-outline" onclick="Molds.addNewCollection()" title="Новая коллекция" style="padding:4px 8px;">+</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Статус</label>
                        <select id="mold-status">
                            <option value="active">Активный</option>
                            <option value="client">Клиентский (ждём повтора)</option>
                            <option value="retired">Неактивный</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Шт/час (план мин)</label>
                        <input type="number" min="0" id="mold-pph-min">
                    </div>
                    <div class="form-group">
                        <label>Шт/час (план макс)</label>
                        <input type="number" min="0" id="mold-pph-max">
                    </div>
                    <div class="form-group">
                        <label>Шт/час (факт)</label>
                        <input type="number" min="0" id="mold-pph-actual">
                        <span class="form-hint">Реальная скорость по хронометражу</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Вес изделия (г)</label>
                        <input type="number" min="0" id="mold-weight">
                    </div>
                    <div class="form-group">
                        <label>Тип молда</label>
                        <select id="mold-complexity">
                            <option value="simple">Простой (2 части) — 800&#165;</option>
                            <option value="complex">Сложный (2 части) — 1000&#165;</option>
                            <option value="nfc_triple">NFC (3 части) — 1200&#165;</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Стоимость молда (&#165;)</label>
                        <input type="number" min="0" id="mold-cost-cny">
                        <span class="form-hint">Авто: 800/1000/1200 по типу</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Кол-во молдов в изделии</label>
                        <input type="number" min="1" max="5" id="mold-count" value="1">
                        <span class="form-hint">Напр. подставка = 2 молда</span>
                    </div>
                    <div class="form-group">
                        <label>Курс юаня (&#8381;)</label>
                        <input type="number" step="0.01" id="mold-cny-rate" value="14">
                    </div>
                    <div class="form-group">
                        <label>Доставка 1 молда (&#8381;)</label>
                        <input type="number" min="0" id="mold-delivery-cost" value="15200">
                        <span class="form-hint">~160$ (60$ Китай + 100$ МСК)</span>
                    </div>
                    <div class="form-group">
                        <label>Стоимость ИТОГО (&#8381;)</label>
                        <input type="number" min="0" id="mold-cost-rub" readonly style="background:#f5f5f5;font-weight:700">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Клиент (если клиентский)</label>
                        <input type="text" id="mold-client" placeholder="Название компании">
                    </div>
                </div>

                <!-- Built-in hardware (e.g. mirror for mirror blank) -->
                <div class="section-title" style="margin-top:12px; margin-bottom:4px;">Встроенная фурнитура <span style="font-weight:400;font-size:11px;color:var(--text-muted)">(если изделие продаётся только с ней)</span></div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Название фурнитуры</label>
                        <input type="text" id="mold-hw-name" placeholder="Зеркало, магнит, кольцо...">
                    </div>
                    <div class="form-group">
                        <label>Закупка (&#8381;/шт)</label>
                        <input type="number" min="0" step="0.01" id="mold-hw-price">
                    </div>
                    <div class="form-group">
                        <label>Доставка всего (&#8381;)</label>
                        <input type="number" min="0" id="mold-hw-delivery-total" value="0">
                    </div>
                    <div class="form-group">
                        <label>Сборка (шт/ч)</label>
                        <input type="number" min="0" id="mold-hw-speed">
                        <span class="form-hint">Скорость приклейки/сборки</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Заметки</label>
                    <textarea id="mold-notes" rows="2" placeholder="Особенности, проблемы, история"></textarea>
                </div>
                <div style="margin-top: 12px; display:flex; gap:8px; align-items:center;">
                    <button class="btn btn-success" onclick="Molds.saveMold()">Сохранить</button>
                    <button class="btn btn-outline" onclick="Molds.hideForm()">Отмена</button>
                    <button class="btn btn-danger" id="mold-delete-btn" style="margin-left:auto; display:none;" onclick="Molds.deleteFromForm()">Удалить бланк</button>
                </div>
            </div>
        </div>

        <!-- ========== TIME TRACKING ========== -->
        <div id="page-timetrack" class="page">
            <div class="page-header">
                <h1>Учет времени</h1>
                <div class="flex gap-8">
                    <button class="btn btn-outline" onclick="TimeTrack.showManualEntry()">+ Вручную</button>
                    <button class="btn btn-primary" onclick="TimeTrack.showBotSetup()">Telegram бот</button>
                </div>
            </div>

            <!-- Bot setup info -->
            <div class="card" id="tt-bot-setup" style="display:none">
                <div class="card-header">
                    <h3>Настройка Telegram бота</h3>
                    <button class="btn btn-sm btn-outline" onclick="TimeTrack.hideBotSetup()">Закрыть</button>
                </div>
                <div style="font-size:13px; color:var(--text-secondary); line-height:1.8">
                    <p><b>1.</b> Создайте бота через <a href="https://t.me/BotFather" target="_blank" style="color:var(--accent)">@BotFather</a> в Telegram</p>
                    <p><b>2.</b> Скопируйте токен бота и вставьте ниже</p>
                    <p><b>3.</b> Разверните бота на сервере (Vercel / Railway / VPS)</p>
                    <p><b>4.</b> Сотрудники добавляют бота и каждый день отчитываются:</p>
                    <div style="background:var(--bg); padding:12px; border-radius:6px; margin:8px 0; font-family:monospace; font-size:12px">
                        /report<br>
                        Бот: На какой проект?<br>
                        <span style="color:var(--accent)">[Показывает кнопки с проектами]</span><br>
                        Бот: Сколько часов?<br>
                        Ответ: 4.5<br>
                        Бот: Записано! Брелоки Яндекс — 4.5ч
                    </div>
                </div>
                <div class="form-row" style="margin-top:12px">
                    <div class="form-group">
                        <label>Токен бота</label>
                        <input type="text" id="tt-bot-token" placeholder="123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11">
                    </div>
                    <div class="form-group">
                        <label>Webhook URL</label>
                        <input type="text" id="tt-webhook-url" placeholder="https://your-server.com/api/bot" readonly style="background:var(--bg)">
                    </div>
                </div>
                <p class="text-muted" style="font-size:11px; margin-top:8px">
                    Код бота доступен в файле <code>bot/timebot.js</code> в репозитории проекта.
                </p>
            </div>

            <!-- Manual entry form -->
            <div class="card" id="tt-manual-form" style="display:none">
                <div class="card-header">
                    <h3>Добавить запись вручную</h3>
                    <button class="btn btn-sm btn-outline" onclick="TimeTrack.hideManualEntry()">Закрыть</button>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Сотрудник</label>
                        <select id="tt-worker-name">
                            <option value="">-- Выберите --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Проект / заказ</label>
                        <select id="tt-project-select">
                            <option value="">-- Выберите проект --</option>
                            <option value="__general">Общие работы (сайка, МП, интернет-магазин)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Часы</label>
                        <input type="number" step="0.5" min="0" max="12" id="tt-hours" value="">
                    </div>
                    <div class="form-group">
                        <label>Дата</label>
                        <input type="date" id="tt-date">
                    </div>
                </div>
                <div class="form-group">
                    <label>Описание (необязательно)</label>
                    <input type="text" id="tt-description" placeholder="Что делали">
                </div>
                <button class="btn btn-success" onclick="TimeTrack.saveEntry()">Сохранить</button>
            </div>

            <!-- Summary stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Часов за неделю</div>
                    <div class="stat-value" id="tt-week-hours">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Часов за месяц</div>
                    <div class="stat-value" id="tt-month-hours">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Сотрудников</div>
                    <div class="stat-value" id="tt-workers-count">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Проектов</div>
                    <div class="stat-value" id="tt-projects-count">0</div>
                </div>
            </div>

            <!-- Daily status card -->
            <div class="card" id="tt-daily-status">
                <div class="card-header">
                    <h3>Отчёты за сегодня</h3>
                    <span class="text-muted" style="font-size:11px;" id="tt-daily-date"></span>
                </div>
                <div id="tt-daily-status-content">
                    <p class="text-muted text-center">Загрузка...</p>
                </div>
            </div>

            <!-- Filters -->
            <div class="card" style="padding: 12px 20px;">
                <div class="form-row" style="align-items:end">
                    <div class="form-group" style="margin:0">
                        <label>Период</label>
                        <select id="tt-filter-period" onchange="TimeTrack.filterAndRender()">
                            <option value="week">Эта неделя</option>
                            <option value="month" selected>Этот месяц</option>
                            <option value="all">Все записи</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Сотрудник</label>
                        <select id="tt-filter-worker" onchange="TimeTrack.filterAndRender()">
                            <option value="">Все</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Проект</label>
                        <select id="tt-filter-project" onchange="TimeTrack.filterAndRender()">
                            <option value="">Все</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Time entries table -->
            <div class="card">
                <div class="table-wrap">
                    <table>
                        <thead>
                            <tr>
                                <th>Дата</th>
                                <th>Сотрудник</th>
                                <th>Проект</th>
                                <th class="text-right">Часы</th>
                                <th>Описание</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="tt-table-body">
                            <tr><td colspan="6" class="text-center text-muted">Нет записей</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Summary by project -->
            <div class="card">
                <div class="card-header"><h3>Итого по проектам</h3></div>
                <div id="tt-project-summary"></div>
            </div>
        </div>

        <!-- ========== TASKS (Kanban) ========== -->
        <div id="page-tasks" class="page">
            <div class="page-header">
                <h1>Задачи</h1>
                <div class="flex gap-8">
                    <div class="flex gap-4">
                        <button class="tasks-view-btn active" data-view="kanban" onclick="Tasks.setView('kanban')">&#9634; Канбан</button>
                        <button class="tasks-view-btn" data-view="list" onclick="Tasks.setView('list')">&#9776; Список</button>
                    </div>
                    <button class="btn btn-success" onclick="Tasks.showAddForm()">+ Задача</button>
                </div>
            </div>

            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Всего задач</div>
                    <div class="stat-value" id="tasks-total">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Не начато</div>
                    <div class="stat-value" id="tasks-not-started">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">В работе</div>
                    <div class="stat-value" id="tasks-in-progress">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Готово</div>
                    <div class="stat-value" id="tasks-done">0</div>
                </div>
            </div>

            <!-- Filters -->
            <div class="card" style="padding: 12px 20px;">
                <div class="form-row" style="align-items:end">
                    <div class="form-group" style="margin:0">
                        <label>Статус</label>
                        <select id="tasks-filter-status" onchange="Tasks.render()">
                            <option value="active">Активные</option>
                            <option value="Not started">Не начато</option>
                            <option value="In progress">В работе</option>
                            <option value="Done">Готово</option>
                            <option value="Cancelled">Отменено</option>
                            <option value="all">Все</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Ответственный</label>
                        <select id="tasks-filter-assignee" onchange="Tasks.render()">
                            <option value="">Все</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Проект</label>
                        <select id="tasks-filter-project" onchange="Tasks.render()">
                            <option value="">Все</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin:0">
                        <label>Поиск</label>
                        <input type="text" id="tasks-search" placeholder="Название" oninput="Tasks.render()">
                    </div>
                </div>
            </div>

            <!-- Add/Edit form -->
            <div class="card" id="tasks-add-form" style="display:none">
                <input type="hidden" id="task-edit-id">
                <div class="card-header">
                    <h3>Задача</h3>
                    <button class="btn btn-sm btn-outline" onclick="Tasks.hideAddForm()">Закрыть</button>
                </div>
                <div class="form-row">
                    <div class="form-group" style="flex:3">
                        <label>Название</label>
                        <input type="text" id="task-edit-title" placeholder="Что нужно сделать?">
                    </div>
                    <div class="form-group" style="flex:2">
                        <label>Ответственный</label>
                        <input type="text" id="task-edit-assignee" placeholder="Имя">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Дедлайн</label>
                        <input type="date" id="task-edit-deadline">
                    </div>
                    <div class="form-group" style="flex:2">
                        <label>Проект</label>
                        <input type="text" id="task-edit-project" list="task-projects-datalist" placeholder="Название проекта">
                        <datalist id="task-projects-datalist"></datalist>
                    </div>
                </div>
                <div class="form-group">
                    <label>Описание (необязательно)</label>
                    <input type="text" id="task-edit-description" placeholder="Детали задачи">
                </div>
                <button class="btn btn-success" onclick="Tasks.saveTask()">Сохранить</button>
            </div>

            <!-- Kanban board -->
            <div class="kanban-board" id="tasks-kanban"></div>
        </div>

        <!-- ========== IMPORT ========== -->
        <div id="page-import" class="page">
            <div class="page-header">
                <h1>Импорт из FinTablo</h1>
            </div>

            <div class="card">
                <h3 style="margin-bottom: 12px;">Загрузить CSV-отчет</h3>
                <p class="text-muted" style="margin-bottom: 16px; font-size: 13px;">
                    Экспортируйте отчет из FinTablo (ОПиУ по проектам) и загрузите CSV-файл.
                    Система автоматически сопоставит статьи расходов.
                </p>
                <div class="form-group">
                    <label>Выберите заказ</label>
                    <select id="import-order-select">
                        <option value="">-- Выберите заказ --</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Период с</label>
                        <input type="date" id="import-period-start">
                    </div>
                    <div class="form-group">
                        <label>Период по</label>
                        <input type="date" id="import-period-end">
                    </div>
                </div>
                <div class="form-group">
                    <label>CSV-файл</label>
                    <input type="file" id="import-csv-file" accept=".csv">
                </div>
                <button class="btn btn-primary" onclick="Import.processCSV()">Загрузить и обработать</button>
            </div>

            <div class="card" id="import-preview" style="display:none">
                <div class="card-header">
                    <h3>Предварительный просмотр</h3>
                </div>
                <div class="cost-breakdown" id="import-preview-data"></div>
                <div style="margin-top: 16px;">
                    <button class="btn btn-success" onclick="Import.confirmImport()">Подтвердить импорт</button>
                    <button class="btn btn-outline" onclick="Import.cancelImport()">Отмена</button>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>История импортов</h3>
                </div>
                <div class="table-wrap">
                    <table>
                        <thead>
                            <tr>
                                <th>Дата</th>
                                <th>Заказ</th>
                                <th>Период</th>
                                <th class="text-right">Факт расходы</th>
                                <th class="text-right">Факт выручка</th>
                            </tr>
                        </thead>
                        <tbody id="import-history-body">
                            <tr><td colspan="5" class="text-center text-muted">Нет импортов</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- ========== SETTINGS ========== -->
        <div id="page-settings" class="page">
            <div class="page-header">
                <h1>Настройки</h1>
                <button class="btn btn-success" onclick="Settings.saveAll()">Сохранить</button>
            </div>

            <div class="tabs">
                <div class="tab active" data-tab="production" onclick="Settings.switchTab('production')">Производство</div>
                <div class="tab" data-tab="costs" onclick="Settings.switchTab('costs')">Расходы</div>
                <div class="tab" data-tab="pricing" onclick="Settings.switchTab('pricing')">Ценообразование</div>
                <div class="tab" data-tab="templates" onclick="Settings.switchTab('templates')">Справочник форм</div>
                <div class="tab" data-tab="employees" onclick="Settings.switchTab('employees')">Сотрудники</div>
            </div>

            <!-- Production tab -->
            <div id="settings-tab-production" class="settings-tab-content">
                <div class="card">
                    <h3 style="margin-bottom: 16px;">Параметры производства</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Кол-во сотрудников</label>
                            <input type="number" step="0.5" id="set-workers_count" data-key="workers_count">
                            <span class="form-hint">чел</span>
                        </div>
                        <div class="form-group">
                            <label>Часов на 1 сотрудника</label>
                            <input type="number" id="set-hours_per_worker" data-key="hours_per_worker">
                            <span class="form-hint">ч/мес (9ч x 21дн = 189)</span>
                        </div>
                        <div class="form-group">
                            <label>Коэфф. загрузки</label>
                            <input type="number" step="0.05" id="set-work_load_ratio" data-key="work_load_ratio">
                            <span class="form-hint">0.8 = 80%</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Доля литья пластика</label>
                            <input type="number" step="0.05" id="set-plastic_injection_ratio" data-key="plastic_injection_ratio">
                            <span class="form-hint">0.7 = 70%</span>
                        </div>
                        <div class="form-group">
                            <label>Доля упаковки</label>
                            <input type="number" step="0.05" id="set-packaging_ratio" data-key="packaging_ratio">
                            <span class="form-hint">0.3 = 30%</span>
                        </div>
                        <div class="form-group">
                            <label>Коэфф. потерь</label>
                            <input type="number" step="0.05" id="set-waste_factor" data-key="waste_factor">
                            <span class="form-hint">1.1 = 10% запас</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Скорость срезки лейников</label>
                            <input type="number" id="set-cutting_speed" data-key="cutting_speed">
                            <span class="form-hint">шт/ч</span>
                        </div>
                        <div class="form-group">
                            <label>Скорость записи NFC</label>
                            <input type="number" id="set-nfc_write_speed" data-key="nfc_write_speed">
                            <span class="form-hint">шт/ч</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Costs tab -->
            <div id="settings-tab-costs" class="settings-tab-content" style="display:none">
                <div class="card">
                    <h3 style="margin-bottom: 16px;">Себестоимость</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>ФОТ производства в час</label>
                            <input type="number" id="set-fot_per_hour" data-key="fot_per_hour">
                            <span class="form-hint">руб/ч</span>
                        </div>
                        <div class="form-group">
                            <label>Косвенные расходы (месяц)</label>
                            <input type="number" id="set-indirect_costs_monthly" data-key="indirect_costs_monthly">
                            <span class="form-hint">руб/мес</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Стоимость пластика за кг</label>
                            <input type="number" id="set-plastic_cost_per_kg" data-key="plastic_cost_per_kg">
                            <span class="form-hint">руб/кг</span>
                        </div>
                        <div class="form-group">
                            <label>Стоимость NFC метки</label>
                            <input type="number" id="set-nfc_tag_cost" data-key="nfc_tag_cost">
                            <span class="form-hint">руб/шт</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Амортизация молда (базовая)</label>
                            <input type="number" id="set-mold_base_cost" data-key="mold_base_cost">
                            <span class="form-hint">руб</span>
                        </div>
                        <div class="form-group">
                            <label>Проектирование формы</label>
                            <input type="number" id="set-design_cost" data-key="design_cost">
                            <span class="form-hint">руб</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Доставка по МСК</label>
                            <input type="number" id="set-delivery_cost_moscow" data-key="delivery_cost_moscow">
                            <span class="form-hint">руб</span>
                        </div>
                        <div class="form-group">
                            <label>Доставка с печати</label>
                            <input type="number" id="set-printing_delivery_cost" data-key="printing_delivery_cost">
                            <span class="form-hint">руб</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pricing tab -->
            <div id="settings-tab-pricing" class="settings-tab-content" style="display:none">
                <div class="card">
                    <h3 style="margin-bottom: 16px;">Ценообразование</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Целевая маржа</label>
                            <input type="number" step="0.05" id="set-margin_target" data-key="margin_target">
                            <span class="form-hint">0.40 = 40%</span>
                        </div>
                        <div class="form-group">
                            <label>Ставка НДС</label>
                            <input type="number" step="0.01" id="set-vat_rate" data-key="vat_rate">
                            <span class="form-hint">0.05 = 5%</span>
                        </div>
                        <div class="form-group">
                            <label>Ставка налога</label>
                            <input type="number" step="0.01" id="set-tax_rate" data-key="tax_rate">
                            <span class="form-hint">0.06 = 6%</span>
                        </div>
                    </div>
                    <h3 style="margin: 20px 0 16px;">Маркетплейс</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Комиссия МП</label>
                            <input type="number" step="0.01" id="set-mp_commission" data-key="mp_commission">
                            <span class="form-hint">0.05 = 5%</span>
                        </div>
                        <div class="form-group">
                            <label>Логистика МП</label>
                            <input type="number" step="0.01" id="set-mp_logistics" data-key="mp_logistics">
                            <span class="form-hint">0.06 = 6%</span>
                        </div>
                        <div class="form-group">
                            <label>Хранение МП</label>
                            <input type="number" step="0.01" id="set-mp_storage_ratio" data-key="mp_storage_ratio">
                            <span class="form-hint">0.32 = 32%</span>
                        </div>
                        <div class="form-group">
                            <label>Эквайринг МП</label>
                            <input type="number" step="0.001" id="set-mp_acquiring" data-key="mp_acquiring">
                            <span class="form-hint">0.065 = 6.5%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Employees tab -->
            <div id="settings-tab-employees" class="settings-tab-content" style="display:none">
                <div class="card">
                    <div class="card-header">
                        <h3>Сотрудники</h3>
                        <button class="btn btn-sm btn-primary" onclick="Settings.showAddEmployee()">+ Добавить</button>
                    </div>

                    <!-- Add/Edit form -->
                    <div id="employee-form" style="display:none; margin-bottom:16px; padding:16px; background:var(--bg); border-radius:8px;">
                        <input type="hidden" id="emp-edit-id">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Имя</label>
                                <input type="text" id="emp-name" placeholder="Имя сотрудника">
                            </div>
                            <div class="form-group">
                                <label>Роль</label>
                                <select id="emp-role">
                                    <option value="production">Производство</option>
                                    <option value="office">Офис / менеджер</option>
                                    <option value="management">Руководство</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Часов в день</label>
                                <input type="number" id="emp-daily-hours" value="8" step="0.5" min="1" max="12">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Telegram @username</label>
                                <input type="text" id="emp-tg-username" placeholder="@username">
                            </div>
                            <div class="form-group">
                                <label>Напоминание (час)</label>
                                <input type="number" id="emp-reminder-hour" value="17" min="0" max="23">
                            </div>
                            <div class="form-group">
                                <label>Мин.</label>
                                <input type="number" id="emp-reminder-min" value="30" min="0" max="59" step="5">
                            </div>
                            <div class="form-group">
                                <label>Часовой пояс (UTC+)</label>
                                <input type="number" id="emp-tz-offset" value="3" min="-12" max="14">
                            </div>
                        </div>
                        <div style="margin-bottom:12px;">
                            <label style="display:flex;align-items:center;gap:6px;font-size:13px;cursor:pointer;">
                                <input type="checkbox" id="emp-tasks-required">
                                Обязательное описание задач (бот будет требовать «что конкретно делал»)
                            </label>
                        </div>
                        <div class="flex gap-8">
                            <button class="btn btn-success" onclick="Settings.saveEmployee()">Сохранить</button>
                            <button class="btn btn-outline" onclick="Settings.cancelEmployee()">Отмена</button>
                            <button class="btn btn-danger" id="emp-delete-btn" style="margin-left:auto;display:none;" onclick="Settings.deleteEmployee()">Удалить</button>
                        </div>
                    </div>

                    <!-- Employees table -->
                    <div class="table-wrap">
                        <table style="font-size:13px;">
                            <thead>
                                <tr>
                                    <th>Имя</th>
                                    <th style="text-align:center">Роль</th>
                                    <th style="text-align:center">Часов/день</th>
                                    <th style="text-align:center">Telegram</th>
                                    <th style="text-align:center">Напоминание</th>
                                    <th style="text-align:center">Задачи</th>
                                    <th style="text-align:center">Статус</th>
                                    <th style="width:40px"></th>
                                </tr>
                            </thead>
                            <tbody id="employees-table-body">
                                <tr><td colspan="8" class="text-center text-muted">Загрузка...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Templates tab -->
            <div id="settings-tab-templates" class="settings-tab-content" style="display:none">
                <div class="card">
                    <div class="card-header">
                        <h3>Справочник форм/бланков</h3>
                        <div style="display:flex;gap:8px;">
                            <button class="btn btn-sm btn-success" id="settings-save-molds-btn" style="display:none" onclick="Settings.saveMoldsChanges()">Сохранить</button>
                        </div>
                    </div>
                    <p style="font-size:11px;color:var(--text-muted);margin-bottom:12px;">Редактируйте параметры прямо в таблице. Изменённые строки подсветятся зелёным.</p>
                    <div class="table-wrap">
                        <table style="font-size:12px;">
                            <thead>
                                <tr>
                                    <th style="min-width:140px">Название</th>
                                    <th style="width:70px;text-align:center">Тип</th>
                                    <th style="width:70px;text-align:center">Шт/ч мин</th>
                                    <th style="width:70px;text-align:center">Шт/ч макс</th>
                                    <th style="width:70px;text-align:center">Шт/ч факт</th>
                                    <th style="width:70px;text-align:center">Вес (г)</th>
                                    <th style="width:60px;text-align:center">Молды</th>
                                    <th style="width:40px"></th>
                                </tr>
                            </thead>
                            <tbody id="settings-templates-body">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </main>
</div>

<!-- Toast notification -->
<div id="toast" class="toast"></div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.2/jspdf.umd.min.js"></script>
<script src="js/supabase.js?v=25"></script>
<script src="js/calculator.js?v=25"></script>
<script src="js/app.js?v=25"></script>
<script src="js/dashboard.js?v=25"></script>
<script src="js/orders.js?v=25"></script>
<script src="js/analytics.js?v=25"></script>
<script src="js/molds.js?v=25"></script>
<script src="js/kp.js?v=25"></script>
<script src="js/timetrack.js?v=25"></script>
<script src="js/tasks.js?v=25"></script>
<script src="js/import.js?v=25"></script>
<script src="js/factual.js?v=25"></script>
<script src="js/settings.js?v=25"></script>
</body>
</html>
